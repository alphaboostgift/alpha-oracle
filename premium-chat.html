<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha Oracle - AI Motivational Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460  75%, #533483 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background particles */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(0, 255, 200, 0.1) 0%, transparent 50%), 
                        radial-gradient(circle at 80% 20%, rgba(138, 43, 226, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(255, 0, 150, 0.1) 0%, transparent 50%);
            animation: float 8s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 200, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0, 255, 200, 0.1);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(45deg, #00ffc8, #8a2be2, #ff0080);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 255, 200, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 255, 200, 0.5); }
            to { text-shadow: 0 0 40px rgba(0, 255, 200, 0.8), 0 0 60px rgba(138, 43, 226, 0.3); }
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            font-weight: 300;
        }

        .chat-area {
            flex: 1;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 25px;
            padding: 30px;
            border: 1px solid rgba(0, 255, 200, 0.2);
            backdrop-filter: blur(15px);
            display: flex;
            flex-direction: column;
            box-shadow: inset 0 0 50px rgba(0, 255, 200, 0.05);
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 30px;
            padding-right: 10px;
        }

        .messages::-webkit-scrollbar {
            width: 6px;
        }

        .messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .messages::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #00ffc8, #8a2be2);
            border-radius: 10px;
        }

        .message {
            margin-bottom: 20px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            display: flex;
            justify-content: flex-end;
        }

        .oracle-message {
            display: flex;
            justify-content: flex-start;
        }

        .message-bubble {
            max-width: 75%;
            padding: 20px 25px;
            border-radius: 25px;
            font-size: 1rem;
            line-height: 1.5;
            position: relative;
            word-wrap: break-word;
        }

        .user-bubble {
            background: linear-gradient(135deg, #0066ff, #0052cc);
            color: white;
            border-bottom-right-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.3);
        }

        .oracle-bubble {
            background: linear-gradient(135deg, #00ffc8, #00e6b3);
            color: #0a0a0a;
            border-bottom-left-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 255, 200, 0.3);
            font-weight: 500;
        }

        .oracle-bubble::before {
            content: 'ðŸ”®';
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            from { transform: translateY(-50%) rotate(0deg); }
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .input-area {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        #messageInput {
            width: 100%;
            padding: 20px 25px;
            border: 2px solid rgba(0, 255, 200, 0.3);
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        #messageInput:focus {
            border-color: #00ffc8;
            box-shadow: 0 0 20px rgba(0, 255, 200, 0.3);
            transform: scale(1.02);
        }

        #messageInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .send-button {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ffc8, #8a2be2);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0, 255, 200, 0.4);
        }

        .send-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(0, 255, 200, 0.6);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }

        .typing-dots {
            margin-left: 10px;
        }

        .typing-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ffc8;
            margin: 0 2px;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1.2); opacity: 1; }
        }

        .welcome-message {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .message-bubble {
                max-width: 90%;
                padding: 15px 20px;
            }

            .chat-area {
                padding: 20px;
            }
        }

        /* Pulse effect for new messages */
        @keyframes pulse {
            0% { box-shadow: 0 5px 20px rgba(0, 255, 200, 0.3); }
            50% { box-shadow: 0 8px 30px rgba(0, 255, 200, 0.6); }
            100% { box-shadow: 0 5px 20px rgba(0, 255, 200, 0.3); }
        }

        .new-message {
            animation: pulse 2s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Alpha Oracle</h1>
            <p>Your AI Motivational Guide & Life Transformer</p>
        </div>

        <div class="chat-area">
            <div class="messages" id="messages">
                <div class="welcome-message">
                    Welcome to Alpha Oracle - Where transformation begins with a conversation ðŸŒŸ
                </div>
                <div class="message oracle-message">
                    <div class="message-bubble oracle-bubble">
                        I'm Alpha Oracle, your personal guide to unlocking your inner strength and achieving your highest potential. Whether you're facing challenges, seeking motivation, or ready to transform your life, I'm here to help you discover the warrior within. 
                        <br><br>
                        What's on your mind today? Let's begin your journey to greatness. ðŸ’ªâœ¨
                    </div>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <span>Alpha Oracle is channeling wisdom</span>
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div class="input-area">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Share your thoughts, dreams, or challenges..."
                        onkeypress="if(event.key==='Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); }"
                        maxlength="500"
                    />
                </div>
                <button class="send-button" id="sendButton" onclick="sendMessage()">
                    âš¡
                </button>
            </div>
        </div>
    </div>

    <script>
        let isProcessing = false;

        async function sendMessage() {
            if (isProcessing) return;

            const input = document.getElementById('messageInput');
            const messages = document.getElementById('messages');
            const sendButton = document.getElementById('sendButton');
            const typingIndicator = document.getElementById('typingIndicator');
            
            const message = input.value.trim();
            if (!message) return;

            // Prevent multiple sends
            isProcessing = true;
            input.disabled = true;
            sendButton.disabled = true;

            // Add user message with animation
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'message user-message';
            userMessageDiv.innerHTML = `
                <div class="message-bubble user-bubble">
                    ${escapeHtml(message)}
                </div>
            `;
            messages.appendChild(userMessageDiv);

            // Clear input
            input.value = '';

            // Show typing indicator
            typingIndicator.style.display = 'flex';

            // Scroll to bottom
            scrollToBottom();

            try {
                // Send to Alpha Oracle
                const response = await fetch('http://localhost:3000/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message: message })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                // Hide typing indicator
                typingIndicator.style.display = 'none';

                // Add Oracle response with animation
                const oracleMessageDiv = document.createElement('div');
                oracleMessageDiv.className = 'message oracle-message';
                oracleMessageDiv.innerHTML = `
                    <div class="message-bubble oracle-bubble new-message">
                        ${formatOracleResponse(data.reply)}
                    </div>
                `;
                messages.appendChild(oracleMessageDiv);

                // Play subtle notification sound (optional)
                playNotificationSound();

            } catch (error) {
                console.error('Error:', error);
                
                // Hide typing indicator
                typingIndicator.style.display = 'none';

                // Show error message
                const errorMessageDiv = document.createElement('div');
                errorMessageDiv.className = 'message oracle-message';
                errorMessageDiv.innerHTML = `
                    <div class="message-bubble oracle-bubble" style="background: linear-gradient(135deg, #ff6b6b, #ff5252); color: white;">
                        I'm experiencing some technical difficulties connecting to the cosmic wisdom network. Please try again in a moment. ðŸ”®âš¡
                    </div>
                `;
                messages.appendChild(errorMessageDiv);
            } finally {
                // Re-enable input
                isProcessing = false;
                input.disabled = false;
                sendButton.disabled = false;
                input.focus();
                scrollToBottom();
            }
        }

        function escapeHtml(unsafe) {
            return unsafe
                 .replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
        }

        function formatOracleResponse(text) {
            // Make URLs clickable
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            return escapeHtml(text).replace(urlRegex, '<a href="$1" target="_blank" style="color: #0066ff; text-decoration: underline;">$1</a>');
        }

        function scrollToBottom() {
            const messages = document.getElementById('messages');
            setTimeout(() => {
                messages.scrollTop = messages.scrollHeight;
            }, 100);
        }

        function playNotificationSound() {
            // Create subtle notification sound
            const audioContext = window.AudioContext || window.webkitAudioContext;
            if (audioContext) {
                const context = new audioContext();
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.1, context.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.3);
                
                oscillator.start(context.currentTime);
                oscillator.stop(context.currentTime + 0.3);
            }
        }

        // Auto-focus on input when page loads
        window.onload = function() {
            document.getElementById('messageInput').focus();
        };

        // Add some interactive effects
        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('messageInput');
            
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });
    </script>
</body>
</html>